<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dartboard Jitter Plot</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    background: #f4f4f4;
  }
  canvas {
    margin-top: 20px;
    background: white;
    border-radius: 50%;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
  }
</style>
</head>
<body>
<h2>Dartboard Jitter Plot</h2>
<canvas id="dartboard" width="600" height="600"></canvas>

<script>
const rawData = [
  // Week 1 row
  [1,8,11,18,40,31,1,11,22,22,4,5,10,7,15,27,7],
  // filler rows
  [1,2,3,4,5],[1,6,7,8,9],[1,10,11,12,13],
  // Week 2 row
  [2,5,9,14,20,2,19,22,35,8,11,18,25,30,16,28,12],
  [2,2,3,4,5],[2,6,7,8,9],[2,10,11,12,13],
  // Week 3 row
  [3,12,18,7,4,19,23,8,2,11,15,27,6,14,20,25,9],
  [3,2,3,4,5],[3,6,7,8,9],[3,10,11,12,13],
  // Week 4 row
  [4,7,14,21,33,2,12,27,30,5,8,15,19,24,10,18,29],
  // ... continue up to week 18 in your sheet
];

// parameters
const numWeeks = 18;
const rowsPerWeek = 4; // every 4th row corresponds to the weekâ€™s numbers
const sliceAngle = (2 * Math.PI) / numWeeks;

function getWeekData() {
  const weekMap = {};
  for (let w = 1; w <= numWeeks; w++) {
    const rowIndex = (w - 1) * rowsPerWeek; // every 4th row
    if (rowIndex < rawData.length) {
      const row = rawData[rowIndex];
      const week = row[0];
      const numbers = row.slice(1).map(v => parseFloat(v)).filter(v => !isNaN(v));
      weekMap[week] = numbers;
    }
  }
  return weekMap;
}

function jitterPoints(numbers, week) {
  const points = [];
  const angleStart = (week - 1) * sliceAngle;
  const angleMid = angleStart + sliceAngle / 2;
  numbers.forEach(num => {
    const angle = angleMid + (Math.random() - 0.5) * (sliceAngle * 0.8);
    const radius = (num / 40) * 280 + (Math.random() - 0.5) * 10; // scale + jitter
    const x = radius * Math.cos(angle);
    const y = radius * Math.sin(angle);
    points.push({x, y});
  });
  return points;
}

function drawDartboard() {
  const ctx = document.getElementById("dartboard").getContext("2d");
  const weekMap = getWeekData();

  const datasets = [];
  Object.keys(weekMap).forEach(week => {
    const points = jitterPoints(weekMap[week], parseInt(week));
    datasets.push({
      label: "Week " + week,
      data: points,
      pointRadius: 6,
      backgroundColor: "rgba(0,100,255,0.6)"
    });
  });

  new Chart(ctx, {
    type: "scatter",
    data: { datasets },
    options: {
      plugins: {
        legend: { display: false },
        datalabels: { display: false }
      },
      scales: {
        x: { min: -300, max: 300, display: false },
        y: { min: -300, max: 300, display: false }
      }
    }
  });
}

drawDartboard();
</script>
</body>
</html>
