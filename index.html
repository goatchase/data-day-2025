<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>"Data" Day Scores</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
<style>
body { font-family:'Roboto',sans-serif; background:#fff; margin:20px; color:#333; }
h1 { text-align:center; margin-bottom:20px; }
button {
  display:inline-block; margin:5px; padding:10px 20px; font-size:15px; cursor:pointer;
  border:none; border-radius:12px;
  background:linear-gradient(to bottom,#f9f9f9,#e0e0e0); box-shadow:0 2px 4px rgba(0,0,0,.2);
  transition:all .2s ease;
}
button:hover { background:linear-gradient(to bottom,#fff,#d5d5d5); }

/* table styling */
.sheet-container { overflow-x:auto; margin:0 auto; max-width:800px; }
table { border-collapse:collapse; width:100%; margin-top:20px; }
th,td { border:1px solid #ddd; padding:8px; text-align:center; }
th { background:#f2f2f2; }
tr:hover { background:#f9f9f9; }

/* modal base */
.modal {
  display:none; position:fixed; z-index:1000; left:0; top:0;
  width:100%; height:100%; overflow:auto;
  background:rgba(0,0,0,0.6);
}
.modal-content {
  background:#fff; margin:5% auto; padding:20px; border-radius:12px;
  width:85%; max-width:700px; box-shadow:0 4px 10px rgba(0,0,0,.3);
}
.close-btn, .close-standings-btn {
  color:#aaa; float:right; font-size:28px; font-weight:bold; cursor:pointer;
}
.close-btn:hover, .close-standings-btn:hover { color:#000; }

#dartHeader { text-align:center; margin-bottom:10px; }
#dartStats { text-align:center; margin-bottom:10px; font-weight:bold; }

</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<h1>"Data" Day Scores</h1>
<button id="openModalBtn">Cheaccuracy</button>
<button id="openStandingsBtn">Standings</button>

<div class="sheet-container">
  <table id="data-table"><thead></thead><tbody></tbody></table>
</div>

<!-- Dartboard Modal -->
<div id="dartModal" class="modal">
  <div class="modal-content">
    <span class="close-btn">&times;</span>
    <div id="dartHeader">
      <h2>Cheaccuracy</h2>
      <p>Accuracy of each game - Cheah's data vs. result</p>
    </div>
    <div id="dartStats"></div>
    <canvas id="dartboard" width="650" height="650"></canvas>
  </div>
</div>

<!-- Standings Modal -->
<div id="standingsModal" class="modal">
  <div class="modal-content">
    <span class="close-standings-btn">&times;</span>
    <h2 style="text-align:center; margin-bottom:10px;">Standings</h2>
    <div class="sheet-container">
      <table id="standings-table"><thead></thead><tbody></tbody></table>
    </div>
  </div>
</div>

<script>
// === MAIN TABLE (Data tab) ===
const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRzZ98moW_HArkbdGmyy83BjEVJn3pvpnOtOM66bs77BERNHalhZGkM8KodckPh8QybWJBnz3OwqZaa/pub?gid=0&single=true&output=csv";
fetch(sheetUrl)
  .then(res => res.text())
  .then(text => {
    const rows = text.trim().split("\n").map(r=>r.split(","));
    const table = document.getElementById("data-table");
    const thead = table.querySelector("thead");
    const tbody = table.querySelector("tbody");
    const headerRow = document.createElement("tr");
    rows[0].forEach(h => {
      const th = document.createElement("th");
      th.textContent = h;
      headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);
    rows.slice(1).forEach(r => {
      const tr = document.createElement("tr");
      r.forEach(c => {
        const td = document.createElement("td");
        td.textContent = c;
        tr.appendChild(td);
      });
      tbody.appendChild(tr);
    });
  });

// === CHEACCURACY MODAL ===
const modal = document.getElementById("dartModal");
const openModalBtn = document.getElementById("openModalBtn");
const closeBtn = document.querySelector(".close-btn");
openModalBtn.onclick = ()=>{ modal.style.display="block"; };
closeBtn.onclick = ()=>{ modal.style.display="none"; };
window.onclick = (e)=>{ if(e.target===modal) modal.style.display="none"; };

// Example dummy dartboard chart (replace with your jitter/scatter logic)
const ctx = document.getElementById("dartboard").getContext("2d");
new Chart(ctx, {
  type:"scatter",
  data:{ datasets:[{
    label:"Example Data",
    data:[{x:1,y:2},{x:2,y:1},{x:3,y:3}],
    backgroundColor:"rgba(0,123,255,0.6)"
  }]},
  options:{ plugins:{ legend:{display:false} }, scales:{x:{},y:{}} }
});

// === STANDINGS MODAL ===
const standingsModal = document.getElementById("standingsModal");
const openStandingsBtn = document.getElementById("openStandingsBtn");
const closeStandingsBtn = document.querySelector(".close-standings-btn");

openStandingsBtn.onclick = async () => {
  standingsModal.style.display = "block";

  const standingsUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRzZ98moW_HArkbdGmyy83BjEVJn3pvpnOtOM66bs77BERNHalhZGkM8KodckPh8QybWJBnz3OwqZaa/pub?gid=812722975&single=true&output=csv";
  const res = await fetch(standingsUrl);
  const text = await res.text();
  const rows = text.trim().split("\n").map(r=>r.split(","));

  const table = document.getElementById("standings-table");
  const thead = table.querySelector("thead");
  const tbody = table.querySelector("tbody");
  thead.innerHTML = "";
  tbody.innerHTML = "";

  const headerRow = document.createElement("tr");
  rows[0].forEach(h => {
    const th = document.createElement("th");
    th.textContent = h;
    headerRow.appendChild(th);
  });
  thead.appendChild(headerRow);

  rows.slice(1).forEach(r => {
    const tr = document.createElement("tr");
    r.forEach(c => {
      const td = document.createElement("td");
      td.textContent = c;
      tr.appendChild(td);
    });
    tbody.appendChild(tr);
  });
};

closeStandingsBtn.onclick = ()=>{ standingsModal.style.display="none"; };
window.onclick = (e)=>{ if(e.target===standingsModal) standingsModal.style.display="none"; };
</script>
</body>
</html>
